namespace: lingua-quiz-local

backend:
  image:
    repository: lingua-quiz-backend
    pullPolicy: Never # Use locally built image
    tag: 'latest'
  port: 9000
  corsAllowedOrigins: 'http://localhost'
  service:
    type: ClusterIP
    port: 9000
  resources:
    limits:
      cpu: '500m'
      memory: '1Gi'
    requests:
      cpu: '100m'
      memory: '512Mi'

frontend:
  image:
    repository: lingua-quiz-frontend
    pullPolicy: Never # Use locally built image
    tag: 'latest'
  port: 80
  service:
    type: ClusterIP
    port: 80
  resources:
    limits:
      cpu: '100m'
      memory: '512Mi'
    requests:
      cpu: '25m'
      memory: '256Mi'

# PostgreSQL configuration - use shared instance
postgres:
  enabled: false # Don't deploy PostgreSQL with the app
  external:
    host: 'shared-postgres.shared-database.svc.cluster.local'
    port: 5432
    database: 'linguaquiz_dev'

ingress:
  enabled: true
  className: 'nginx'
  frontend:
    host: localhost
  backend:
    host: # Same host as frontend - API will be served from /api path
  tls:
    enabled: false # No TLS for local development

migrations:
  enabled: true
  command: ['python', 'migrate.py']
  ttlSecondsAfterFinished: 600
  restartPolicy: OnFailure
  backoffLimit: 3
  resources:
    limits:
      cpu: '200m'
      memory: '512Mi'
    requests:
      cpu: '50m'
      memory: '128Mi'
  env:
    - name: DOCKER_ENVIRONMENT
      value: 'true'

tests:
  enabled: true
  image:
    repository: lingua-quiz-integration-e2e-tests # Test runner image
    pullPolicy: Never
    tag: 'latest'
  ttlSecondsAfterFinished: 600
  restartPolicy: Never
  backoffLimit: 3
  skipTtsTests: 'true'
  resources:
    limits:
      cpu: '500m'
      memory: '512Mi'
    requests:
      cpu: '100m'
      memory: '256Mi'
