<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <link rel="apple-touch-icon" sizes="180x180" href="favicon/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="favicon/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="favicon/favicon-16x16.png" />
    <link rel="manifest" href="favicon/site.webmanifest" />
    <meta name="apple-mobile-web-app-title" content="LinguaQuiz" />
    <meta name="application-name" content="LinguaQuiz" />
    <meta name="msapplication-TileColor" content="#4a90e2" />
    <meta name="theme-color" content="#4a90e2" />
    <title>LinguaQuiz - Login/Register</title>
    <link href="css/styles.css" rel="stylesheet" />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <script type="importmap">
      {
        "imports": {
          "lodash": "https://cdn.jsdelivr.net/npm/lodash-es@4.17.21/lodash.js",
          "jwt-decode": "https://cdn.jsdelivr.net/npm/jwt-decode@3.1.2/build/jwt-decode.esm.js"
        }
      }
    </script>
    <script type="module">
      import { initAuth } from './js/ui/loginManager.js';
      import { initEventHandlers } from './js/ui/eventHandlers.js';
      import { errorHandler } from './js/utils/errorHandler.js';

      document.addEventListener('DOMContentLoaded', () => {
        errorHandler.init();
        initEventHandlers();
        initAuth();
      });
    </script>
  </head>

  <body>
    <main class="container login-container">
      <div class="left-sidebar">
        <header>
          <h1><i class="fas fa-language"></i> LinguaQuiz</h1>
        </header>
      </div>
      <div class="main-content login-content">
        <section aria-labelledby="login-section" class="sidebar-section">
          <h2 id="login-section">Login</h2>
          <form id="login-form">
            <div class="input-group">
              <label for="email"></label>
              <input id="email" name="email" placeholder="Email" required type="email" />
            </div>
            <div class="input-group">
              <label for="password"></label>
              <input
                id="password"
                name="password"
                placeholder="Password"
                required
                type="password"
              />
              <button type="button" class="toggle-password-btn">
                <i class="fas fa-eye"></i>
              </button>
            </div>
            <button type="submit"><i class="fas fa-sign-in-alt"></i> Login</button>
          </form>
          <p id="login-message"></p>
        </section>

        <!-- Button to show registration -->
        <div class="text-center" style="margin: 20px 0">
          <button id="show-register-btn" type="button" class="link-button">
            Need an account? Register here.
          </button>
        </div>

        <!-- Registration section, initially hidden -->
        <div id="register-section-wrapper" class="hidden">
          <section aria-labelledby="register-section" class="sidebar-section">
            <h2 id="register-section">Register</h2>
            <form id="register-form">
              <div class="input-group">
                <label for="register-email"></label>
                <input id="register-email" name="email" placeholder="Email" required type="email" />
              </div>
              <div class="input-group">
                <label for="register-password"></label>
                <input
                  id="register-password"
                  name="password"
                  placeholder="Password"
                  required
                  type="password"
                />
                <!-- Toggle button will be added by JS -->
              </div>
              <button type="submit" disabled><i class="fas fa-user-plus"></i> Register</button>
            </form>
            <p id="register-message"></p>
          </section>
        </div>
      </div>
      <div class="right-sidebar"></div>
    </main>
  </body>
</html>
