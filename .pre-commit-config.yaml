# Pre-commit configuration for Lingua Quiz
repos:
  # SQL linting and formatting
  - repo: https://github.com/sqlfluff/sqlfluff
    rev: 3.4.2
    hooks:
      - id: sqlfluff-lint
        args: [--dialect=postgres]
        files: \.sql$
      - id: sqlfluff-fix
        args: [--dialect=postgres]
        files: \.sql$

  # YAML linting
  - repo: https://github.com/adrienverge/yamllint
    rev: v1.37.1
    hooks:
      - id: yamllint
        args: [-d, relaxed]
        files: \.(yaml|yml)$
        exclude: ^(helm/.*\.yaml|code\.yaml)$

  # General code quality and formatting
  - repo: https://github.com/pre-commit/pre-commit-hooks
    rev: v6.0.0
    hooks:
      - id: trailing-whitespace
      - id: end-of-file-fixer
      - id: check-yaml
        exclude: ^(helm/.*\.yaml|code\.yaml)$
      - id: check-merge-conflict
      - id: mixed-line-ending
      - id: check-case-conflict
      - id: check-merge-conflict
      - id: debug-statements

  # Python auto-formatting and import sorting
  - repo: https://github.com/pycqa/autoflake
    rev: v2.3.1
    hooks:
      - id: autoflake
        args: [--remove-all-unused-imports, --remove-unused-variables, --in-place]
        files: \.py$

  - repo: https://github.com/psf/black
    rev: 25.1.0
    hooks:
      - id: black
        files: \.py$

  - repo: https://github.com/pycqa/flake8
    rev: 7.3.0
    hooks:
      - id: flake8
        files: \.py$

  # JavaScript/TypeScript linting and formatting
  - repo: local
    hooks:
      - id: eslint
        name: eslint
        entry: npx eslint --fix --max-warnings=0
        language: system
        files: \.(js|jsx|ts|tsx|svelte)$
        pass_filenames: true

  - repo: https://github.com/pre-commit/mirrors-prettier
    rev: v4.0.0-alpha.8
    hooks:
      - id: prettier
        args: [--write, --ignore-path, .gitignore]
        files: \.(js|jsx|ts|tsx|svelte|json|css|scss|html|yaml|yml|md)$
        exclude: ^(packages/.*/(dist|build|node_modules)/.*|helm/.*\.yaml|code\.yaml)$

  # Dependency checking
  - repo: local
    hooks:
      - id: depcheck
        name: depcheck
        entry: npx depcheck
        language: system
        files: package\.json$
        pass_filenames: false

  # Helm chart linting
  - repo: https://github.com/gruntwork-io/pre-commit
    rev: v0.1.30
    hooks:
      - id: helmlint
